<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Professional Certificate Generator — Full Stack Developer</title>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg: #f2f6fb;
            --card: #ffffff;
            --accent: #0a63b7;
            --muted: #556;
            --gold: #c79a2d;
            --border: #e6eefc;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font-family: "Roboto", system-ui, Segoe UI, Roboto, Helvetica, Arial;
            background: linear-gradient(180deg, #eef6ff 0%, var(--bg) 100%);
            color: #0b2140;
        }

        .container {
            max-width: 1100px;
            margin: 28px auto;
            padding: 18px;
        }

        header {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 16px;
        }

        header h1 {
            margin: 0;
            font-family: "Playfair Display", serif;
            font-size: 20px;
        }

        header p {
            margin: 0;
            color: var(--muted);
            font-size: 13px;
        }

        .layout {
            display: grid;
            grid-template-columns: 420px 1fr;
            gap: 18px;
            align-items: start;
        }

        .panel {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 6px 20px rgba(10, 60, 120, 0.04);
        }

        .form-row {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        label {
            display: block;
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 6px;
        }

        input[type="text"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #dde9fb;
            font-size: 14px;
            outline: none;
            box-sizing: border-box;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .small {
            font-size: 12px;
            color: var(--muted);
        }

        .btn-row {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            align-items: center;
        }

        button {
            background: var(--accent);
            color: white;
            border: 0;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
        }

        button.ghost {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--border);
            font-weight: 700;
        }

        input[type="file"] {
            font-size: 13px;
        }

        /* certificate preview area */
        .preview-wrap {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .cert-canvas {
            width: 100%;
            background: linear-gradient(180deg, #ffffff 0%, #fbfbff 100%);
            border-radius: 8px;
            padding: 28px;
            box-sizing: border-box;
            border: 1px solid #e9eef8;
        }

        /* We style the certificate as an A4-like card scaled to fit container; when printing/pdf we render it to real A4 via html2pdf options. */
        .certificate {
            width: 210mm;
            /* A4 width for layout reference */
            height: 297mm;
            /* A4 height */
            box-sizing: border-box;
            padding: 36mm 22mm;
            /* generous padding for certificate look */
            background: linear-gradient(180deg, #fff 0%, #fcfdff 100%);
            border: 6px solid #fff;
            position: relative;
            font-family: "Roboto", sans-serif;
            color: #07243e;
        }

        .cert-inner {
            height: 100%;
            border: 6px solid rgba(10, 60, 120, 0.04);
            padding: 28px;
            box-sizing: border-box;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        .issuer {
            display: flex;
            width: 100%;
            align-items: center;
            gap: 12px;
            justify-content: space-between;
        }

        .issuer .brand {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .brand .logo {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: linear-gradient(90deg, #e6f2ff, #ffffff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--accent);
            box-shadow: 0 6px 14px rgba(6, 70, 140, 0.06);
        }

        .brand .title {
            font-family: "Playfair Display", serif;
            font-size: 20px;
            color: var(--accent);
            font-weight: 700;
        }

        .cert-title {
            margin-top: 18px;
            font-family: "Playfair Display", serif;
            font-size: 28px;
            letter-spacing: 0.6px;
            color: #08306a;
        }

        .cert-sub {
            margin-top: 6px;
            color: var(--muted);
            font-size: 14px;
            text-align: center;
            max-width: 75%;
        }

        .recipient {
            margin-top: 24px;
            text-align: center;
        }

        .recipient .name {
            font-size: 26px;
            font-weight: 800;
            color: #05243f;
            margin-bottom: 6px;
            font-family: "Playfair Display", serif;
        }

        .recipient .desc {
            font-size: 14px;
            color: var(--muted);
            max-width: 80%;
            margin: 0 auto;
        }

        .meta-row {
            margin-top: 24px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .meta-box {
            text-align: left;
        }

        .meta-box .label {
            font-size: 12px;
            color: var(--muted);
        }

        .meta-box .value {
            font-weight: 700;
            color: #05345a;
            font-size: 14px;
            margin-top: 6px;
        }

        .sig-row {
            margin-top: 32px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .sig-left {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .signature {
            height: 64px;
            width: 220px;
            background: transparent;
            object-fit: contain;
            border-bottom: 1px solid rgba(7, 36, 64, 0.06);
        }

        .issuer-info {
            text-align: right;
        }

        .cert-footer {
            position: absolute;
            bottom: 28mm;
            left: 22mm;
            right: 22mm;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--muted);
            align-items: center;
            opacity: 0.95;
        }

        .seal {
            width: 84px;
            height: 84px;
            border-radius: 999px;
            background: linear-gradient(180deg, #fff 0%, #f5f9ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid rgba(10, 60, 120, 0.06);
            font-weight: 800;
            color: var(--gold);
            box-shadow: 0 8px 20px rgba(10, 60, 120, 0.04);
        }

        /* responsive preview scaling */
        .preview-frame {
            width: 100%;
            overflow: auto;
            display: flex;
            justify-content: center;
            padding: 12px;
            background: linear-gradient(180deg, #f8fbff 0%, #fff 100%);
            border-radius: 6px;
            border: 1px dashed rgba(10, 60, 120, 0.03);
        }

        .scale-wrap {
            transform-origin: top left;
        }

        @media (max-width:980px) {
            .layout {
                grid-template-columns: 1fr;
            }

            .certificate {
                padding: 28px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div>
                <h1>Professional Certificate Generator — Full Stack Developer</h1>
                <p>Fill in your details below and generate a downloadable, print-ready PDF certificate (A4).</p>
            </div>
        </header>

        <div class="layout">
            <!-- left: form -->
            <div class="panel">
                <h3 style="margin-top:0">Enter Certificate Details</h3>

                <div style="margin-bottom:8px">
                    <label class="small">Recipient Full Name</label>
                    <input id="fullname" type="text" placeholder="e.g., Linah Tipira" />
                </div>

                <div class="form-row">
                    <div style="flex:1">
                        <label class="small">Course / Title</label>
                        <input id="course" type="text" placeholder="Full Stack Developer Program" />
                    </div>
                </div>

                <div class="form-row">
                    <div style="flex:1">
                        <label class="small">Certificate ID (optional)</label>
                        <input id="certId" type="text" placeholder="e.g., JUTEC/FS/2025/001" />
                    </div>
                    <div style="width:140px">
                        <label class="small">Date</label>
                        <input id="certDate" type="date" />
                    </div>
                </div>

                <div style="margin-bottom:8px">
                    <label class="small">Issuer (Organization)</label>
                    <input id="issuer" type="text" placeholder="e.g., Jutechs Institute" value="Jutechs" />
                </div>

                <div style="margin-bottom:8px">
                    <label class="small">Optional Note / Honors</label>
                    <input id="note" type="text" placeholder="e.g., Completed with Distinction (optional)" />
                </div>

                <div style="margin-bottom:6px">
                    <label class="small">Upload Signature (optional)</label>
                    <input id="sigUpload" type="file" accept="image/*" />
                    <div class="small" style="margin-top:6px">PNG with transparent background recommended. Max 2MB.
                    </div>
                </div>

                <div style="margin-top:12px">
                    <label class="small">Logo text (appears on certificate)</label>
                    <input id="logoText" type="text" placeholder="Jutechs" value="Jutechs" />
                </div>

                <div class="btn-row">
                    <button id="updateBtn">Update Preview</button>
                    <button id="downloadBtn">Generate & Download PDF</button>
                    <button class="ghost" id="resetBtn">Reset</button>
                </div>

                <div style="margin-top:12px" class="small">
                    <strong>Notes:</strong> The PDF will be high-resolution A4. When downloaded on mobile, the file goes
                    to device storage (Downloads folder). No data is sent to any server — generation happens in your
                    browser.
                </div>
            </div>

            <!-- right: preview & actions -->
            <div class="panel preview-wrap">
                <h3 style="margin:0">Certificate Preview</h3>
                <div class="cert-canvas" id="previewArea">
                    <div class="preview-frame">
                        <div id="scaleWrap" class="scale-wrap">
                            <!-- This certificate element will be converted to PDF -->
                            <div id="certificate" class="certificate" role="document" aria-label="Certificate">
                                <div class="cert-inner">
                                    <div class="issuer">
                                        <div class="brand">
                                            <div class="logo" id="logoBox">JT</div>
                                            <div>
                                                <div class="title" id="issuerText">Jutechs</div>
                                                <div class="small" id="issuerTagline">Institute of Technology</div>
                                            </div>
                                        </div>
                                        <div class="seal" id="sealText">CERT</div>
                                    </div>

                                    <div class="cert-title">Certificate of Completion</div>
                                    <div class="cert-sub" id="certSubtitle">This certifies that the person named below
                                        has successfully completed the program</div>

                                    <div class="recipient">
                                        <div class="name" id="recipientName">Full Name Here</div>
                                        <div class="desc" id="recipientDesc">has completed the Full Stack Developer
                                            program with demonstrated proficiency in front-end, back-end and deployment
                                            fundamentals.</div>
                                    </div>

                                    <div class="meta-row">
                                        <div class="meta-box">
                                            <div class="label">Certificate ID</div>
                                            <div class="value" id="metaId">JUTEC-FS-2025-000</div>
                                        </div>

                                        <div class="meta-box" style="text-align:center;">
                                            <div class="label">Date</div>
                                            <div class="value" id="metaDate">October 24, 2025</div>
                                        </div>

                                        <div class="meta-box issuer-info" style="text-align:right;">
                                            <div class="label">Issuer</div>
                                            <div class="value" id="metaIssuer">Jutechs</div>
                                        </div>
                                    </div>

                                    <div class="sig-row">
                                        <div class="sig-left">
                                            <img id="sigImage" class="signature" alt="Signature" src="" style="display:none" />
                                            <div class="small" style="color:var(--muted)">Authorized Signature</div>
                                        </div>
                                        <div style="text-align:right;">
                                            <div class="small" style="margin-bottom:8px">Awarded for:</div>
                                            <div style="font-weight:700; color:#062a4a" id="metaCourse">Full Stack
                                                Developer</div>
                                        </div>
                                    </div>

                                    <div class="cert-footer">
                                        <div class="small">Verify at
                                            <span id="verifyUrl" style="color:var(--accent); font-weight:700">jutechs.wauze.co</span>
                                        </div>
                                        <div class="small">Powered by Jutechs • © <span id="yearText"></span></div>
                                    </div>

                                </div><!-- cert-inner -->
                            </div><!-- certificate -->
                        </div><!-- scale-wrap -->
                    </div><!-- preview-frame -->
                </div><!-- cert-canvas -->

            </div>
        </div>

    </div>

    <!-- html2pdf bundle (includes html2canvas + jsPDF) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

    <script>
        // Elements
    const fullname = document.getElementById('fullname');
    const course = document.getElementById('course');
    const certId = document.getElementById('certId');
    const certDate = document.getElementById('certDate');
    const issuer = document.getElementById('issuer');
    const note = document.getElementById('note');
    const sigUpload = document.getElementById('sigUpload');
    const logoText = document.getElementById('logoText');

    const updateBtn = document.getElementById('updateBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const resetBtn = document.getElementById('resetBtn');

    // Preview elements
    const recipientName = document.getElementById('recipientName');
    const recipientDesc = document.getElementById('recipientDesc');
    const metaId = document.getElementById('metaId');
    const metaDate = document.getElementById('metaDate');
    const metaIssuer = document.getElementById('metaIssuer');
    const metaCourse = document.getElementById('metaCourse');
    const sigImage = document.getElementById('sigImage');
    const logoBox = document.getElementById('logoBox');
    const issuerText = document.getElementById('issuerText');
    const yearText = document.getElementById('yearText');
    const certSubtitle = document.getElementById('certSubtitle');
    const verifyUrl = document.getElementById('verifyUrl');
    const certificateEl = document.getElementById('certificate');

    // Default values
    function setDefaults(){
      if(!fullname.value) fullname.value = '';
      if(!course.value) course.value = 'Full Stack Developer Program';
      if(!issuer.value) issuer.value = 'Jutechs';
      if(!logoText.value) logoText.value = 'Jutechs';
      if(!certId.value) certId.value = 'JUTEC-FS-2025-001';
      if(!certDate.value){
        // set today's date in YYYY-MM-DD format
        const d = new Date();
        const iso = new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,10);
        certDate.value = iso;
      }
      yearText.textContent = new Date().getFullYear();
      verifyUrl.textContent = location.hostname || 'jutechs.wauze.co';
    }
    setDefaults();

    // Helper: format date nicely
    function formatDate(iso){
      if(!iso) return '';
      const d = new Date(iso);
      const opts = { year: 'numeric', month: 'long', day: 'numeric' };
      return d.toLocaleDateString(undefined, opts);
    }

    // Update preview content from form fields
    function updatePreview(){
      recipientName.textContent = fullname.value.trim() || 'Full Name Here';
      const courseText = course.value.trim() || 'Full Stack Developer Program';
      metaCourse.textContent = courseText;
      recipientDesc.textContent = note.value.trim() || `has completed the ${courseText} with demonstrated proficiency in front-end, back-end and deployment fundamentals.`;
      metaId.textContent = certId.value.trim() || '—';
      metaDate.textContent = formatDate(certDate.value) || '—';
      metaIssuer.textContent = issuer.value.trim() || '—';
      issuerText.textContent = issuer.value.trim() || 'Jutechs';
      logoBox.textContent = (logoText.value || '').split(' ').map(w=>w[0]).slice(0,2).join('').toUpperCase() || 'JT';
      certSubtitle.textContent = `This certifies that the person named below has successfully completed the program`;
      verifyUrl.textContent = (location.hostname && location.hostname !== '') ? location.hostname : 'jutechs.wauze.co';
    }

    // Handle signature upload preview
    sigUpload.addEventListener('change', (e) => {
      const f = e.target.files && e.target.files[0];
      if(!f) { sigImage.style.display='none'; sigImage.src=''; return; }
      if(f.size > 2 * 1024 * 1024){ alert('Signature image is larger than 2MB. Please pick a smaller file.'); sigUpload.value=''; return; }
      const reader = new FileReader();
      reader.onload = function(ev){
        sigImage.src = ev.target.result;
        sigImage.style.display = 'block';
      }
      reader.readAsDataURL(f);
    });

    // Attach update button
    updateBtn.addEventListener('click', (e) => {
      updatePreview();
      // scale preview to fit container by CSS transform
      fitPreview();
    });

    resetBtn.addEventListener('click', () => {
      if(!confirm('Reset all fields to defaults?')) return;
      fullname.value=''; course.value='Full Stack Developer Program'; certId.value='JUTEC-FS-2025-001';
      certDate.value=''; issuer.value='Jutechs'; note.value=''; sigUpload.value=''; logoText.value='Jutechs';
      sigImage.src=''; sigImage.style.display='none';
      setDefaults();
      updatePreview();
      fitPreview();
    });

    // Fit preview to container width (scale down for screen)
    function fitPreview(){
      // compute available width of preview frame
      const parent = document.querySelector('.preview-frame');
      const scaleWrap = document.getElementById('scaleWrap');
      if(!parent || !scaleWrap) return;
      const available = parent.clientWidth - 40; // some padding
      const certWidthPx = 210 * (96/25.4); // approximate px width for 210mm at 96dpi: 210mm * (96/25.4)
      const scale = Math.min(1, available / certWidthPx);
      scaleWrap.style.transform = `scale(${scale})`;
    }
    window.addEventListener('resize', fitPreview);
    // initial preview update
    updatePreview();
    fitPreview();

    // PDF generation options using html2pdf
    downloadBtn.addEventListener('click', async () => {
      updatePreview(); // ensure latest values
      // filename based on name and id
      const namePart = (fullname.value.trim() || 'certificate').replace(/\s+/g,'_').replace(/[^a-zA-Z0-9_\-]/g,'');
      const idPart = (certId.value.trim() || '').replace(/\s+/g,'_').replace(/[^a-zA-Z0-9_\-]/g,'');
      const filename = idPart ? `${namePart}_${idPart}.pdf` : `${namePart}_certificate.pdf`;

      // Prepare options for html2pdf to produce high-quality A4 PDF
      const opt = {
        margin:       [10, 10, 10, 10], // mm (top, left, bottom, right) when unit: 'mm' below
        filename:     filename,
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2, useCORS: true, logging: false, allowTaint: true },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };

      // Show a quick feedback message
      downloadBtn.disabled = true;
      downloadBtn.textContent = 'Generating PDF...';

      // Because the certificate element is styled for A4, ensure printing dimensions by temporarily adjusting styles
      // Clone the certificate element to avoid layout changes on screen
      const element = document.getElementById('certificate');
      // Use html2pdf to convert the element
      try {
        await html2pdf().set(opt).from(element).save();
      } catch (err) {
        console.error('PDF generation error', err);
        alert('An error occurred while generating the PDF. See console for details.');
      } finally {
        downloadBtn.disabled = false;
        downloadBtn.textContent = 'Generate & Download PDF';
      }
    });

    // Ensure preview is updated when user types (live update)
    ['input','change'].forEach(evt => {
      [fullname, course, certId, certDate, issuer, note, logoText].forEach(el => {
        el.addEventListener(evt, () => {
          updatePreview();
        });
      });
    });

    // initial auto-update for date etc
    updatePreview();

    // Accessibility: keyboard support for Enter on update
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
        updatePreview();
      }
    });
    </script>
</body>

</html>
